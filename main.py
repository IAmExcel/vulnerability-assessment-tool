import os
import scanner

def generate_report(results):
    """Save the results to a file."""
    report_path = "report/vulnerability_report.txt"
    with open(report_path, "w") as file:
        for key, value in results.items():
            file.write(f"{key}:\n{value}\n\n")
    print(f"Report saved to {report_path}")

def main():
    print("Vulnerability Assessment Tool")
    
    # Create a folder for reports if it doesn't exist
    if not os.path.exists("report"):
        os.makedirs("report")
    
    # Collect data
    results = {}
    results["System Updates"] = "Checked (output shown on terminal)"
    scanner.check_system_updates()
    
    host = input("Enter the host to scan for open ports (e.g., localhost or IP): ")
    results["Open Ports"] = scanner.check_open_ports(host)
    
    results["Installed Software"] = "Checked (output shown on terminal)"
    scanner.check_software_versions()
    
    # Generate the report
    generate_report(results)

if __name__ == "__main__":
    main()
